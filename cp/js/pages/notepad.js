(()=>{const o=io();o.on("connect",()=>{console.log("Connected to server")});var n=new EditorJS({readOnly:!1,holder:"editorjs",inlineToolbar:!0,tools:{header:{class:Header,inlineToolbar:["marker","link"],config:{placeholder:"Header"},shortcut:"CMD+SHIFT+H"},image:SimpleImage,list:{class:List,inlineToolbar:!0,shortcut:"CMD+SHIFT+L"},checklist:{class:Checklist,inlineToolbar:!0},quote:{class:Quote,inlineToolbar:!0,config:{quotePlaceholder:"Enter a quote",captionPlaceholder:"Quote's author"},shortcut:"CMD+SHIFT+O"},warning:Warning,marker:{class:Marker,shortcut:"CMD+SHIFT+M"},code:{class:CodeTool,shortcut:"CMD+SHIFT+C"},delimiter:Delimiter,inlineCode:{class:InlineCode,shortcut:"CMD+SHIFT+C"},linkTool:LinkTool,embed:Embed,table:{class:Table,inlineToolbar:!0,shortcut:"CMD+ALT+T"},translator:{class:Translate,config:{endpoint:"http://localhost:5000/translate?text="}}},onReady:async function(){console.log("Editor.js is ready to work!")},onChange:async function(e,t){"block-changed"===t.type&&n.save().then(e=>{o.emit("save-notepad",encodeURI(JSON.stringify(e)));e=a(e.blocks);currentWordsCount.innerHTML=e}).catch(e=>{console.error("Saving error",e)})}});function t(e){return"text"in e.data}function a(e){return e.filter(t).reduce((e,t)=>e+=t.data.text.length,0)}function s(){$(".remove-note").off("click").on("click",function(e){e.stopPropagation(),$(this).parents(".single-note-item").remove()})}function i(){$(".favourite-note").off("click").on("click",function(e){e.stopPropagation(),$(this).parents(".single-note-item").toggleClass("note-favourite")})}function l(){$(".category-selector .badge-group-item").off("click").on("click",function(e){e.preventDefault();e=this.className.split(" ")[0];$(this).hasClass("badge-business")?($(this).parents(".single-note-item").removeClass("note-social"),$(this).parents(".single-note-item").removeClass("note-important"),$(this).parents(".single-note-item").toggleClass(e)):$(this).hasClass("badge-social")?($(this).parents(".single-note-item").removeClass("note-business"),$(this).parents(".single-note-item").removeClass("note-important"),$(this).parents(".single-note-item").toggleClass(e)):$(this).hasClass("badge-important")&&($(this).parents(".single-note-item").removeClass("note-social"),$(this).parents(".single-note-item").removeClass("note-business"),$(this).parents(".single-note-item").toggleClass(e))})}n.isReady.then(()=>{$.ajax({url:window.location.pathname+"/data",method:"GET",contentType:"application/json",success:function(e){var e=JSON.parse(decodeURI(e.data)),t=(n.render(e),a(e.blocks));currentWordsCount.innerHTML=t,0==e.blocks.length&&n.blocks.insert("paragraph",{text:"Welcome to Notepad! This is a sample text. You can edit this text by clicking on it and start typing. You can also add more blocks by clicking the plus icon on the left side of the editor."})},error:function(e){console.log(e)}})}).catch(e=>{console.log("Editor.js initialization failed because of "+e)}),o.on("current-notepad",function(e){e=JSON.parse(decodeURI(e));n.render(e)});var r=$(".note-link").click(function(){var e;"all-category"==this.id&&(e=$("."+this.id).fadeIn(),$("#note-full-container > div").not(e).hide()),this.id,e=$("."+this.id).fadeIn(),$("#note-full-container > div").not(e).hide(),r.removeClass("active"),$(this).addClass("active")});$("#note-has-title").keyup(function(){var e=!1;$("#note-has-title").each(function(){""==$(this).val()&&(e=!0)}),e?$("#btn-n-add").attr("disabled","disabled"):$("#btn-n-add").removeAttr("disabled")}),$("#btn-n-add").on("click",function(e){e.preventDefault();var e=new Date,t=String(e.getDate()).padStart(2,"0"),o=String(e.getMonth()),n=e.getFullYear(),e=t+" "+["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][o]+" "+n,t=document.getElementById("note-has-title").value,o=document.getElementById("note-has-description").value;$html='<div class="col-md-4 single-note-item all-category"><div class="card card-body"><span class="side-stick"></span><h6 class="note-title text-truncate w-75 mb-0" data-noteHeading="'+t+'">'+t+'</h6><p class="note-date fs-2">'+e+'</p><div class="note-content"><p class="note-inner-content" data-noteContent="'+o+'">'+o+'</p></div><div class="d-flex align-items-center"><a href="javascript:void(0)" class="link me-1"><i class="ti ti-star fs-4 favourite-note"></i></a><a href="javascript:void(0)" class="link text-danger ms-2"><i class="ti ti-trash fs-4 remove-note"></i></a><div class="ms-auto"><div class="category-selector btn-group"><a class="nav-link category-dropdown label-group p-0" data-bs-toggle="dropdown" href="#" role="button" aria-haspopup="true" aria-expanded="true"><div class="category"><div class="category-business"></div><div class="category-social"></div><div class="category-important"></div><span class="more-options text-dark"><i class="ti ti-dots-vertical fs-5"></i></span></div></a><div class="dropdown-menu dropdown-menu-right category-menu"><a class="note-business badge-group-item badge-business dropdown-item position-relative category-business" href="javascript:void(0);">Business</a><a class="note-social badge-group-item badge-social dropdown-item position-relative category-social" href="javascript:void(0);"> Social</a><a class="note-important badge-group-item badge-important dropdown-item position-relative category-important" href="javascript:void(0);"> Important</a></div></div></div></div></div></div> ',$("#note-full-container").prepend($html),$("#addnotesmodal").modal("hide"),s(),i(),l()}),$("#addnotesmodal").on("hidden.bs.modal",function(e){e.preventDefault(),document.getElementById("note-has-title").value="",document.getElementById("note-has-description").value=""}),s(),i(),l(),$("#btn-n-add").attr("disabled","disabled"),$("#add-notes").on("click",function(e){$("#addnotesmodal").modal("show"),$("#btn-n-save").hide(),$("#btn-n-add").show()})})();